---

- name: collect device information
  register: nxosfacts_out
  nxos_facts:
    gather_subset: all

- name: write all the results to JSON file
  copy:
    content: "{{ nxosfacts_out | to_nice_json }}"
    dest: "{{output_folder}}/{{inventory_hostname}}_nxosfacts.json"

- name: write IP addresses to HTML report file
  template:
    src: report_ipaddr.j2
    dest: "{{output_folder}}/{{inventory_hostname}}_ipaddr.html"

- name: write Ethernet interfaces to HTML report file
  template:
    src: report_ethif.j2
    dest: "{{output_folder}}/{{inventory_hostname}}_ethif.html"